<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SATURN // TEXTURE_ATLAS</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #020202;
            font-family: 'Courier New', monospace;
        }
        canvas { display: block; }

        #hud {
            position: absolute;
            top: 50%;
            left: 40px;
            transform: translateY(-50%);
            width: 320px;
            color: #889;
            font-size: 11px;
            z-index: 10;
            pointer-events: none;
            line-height: 1.5;
            text-transform: uppercase;
        }

        .hud-section {
            margin-bottom: 25px;
            border-left: 2px solid #333;
            padding-left: 15px;
        }

        h1 {
            color: #fff;
            margin: 0 0 5px 0;
            font-size: 28px;
            letter-spacing: 4px;
            font-weight: 300;
        }
        
        h2 {
            font-size: 10px;
            color: #445;
            letter-spacing: 2px;
            margin: 0 0 8px 0;
            border-bottom: 1px solid #222;
            padding-bottom: 2px;
            display: inline-block;
        }

        .row { display: flex; justify-content: space-between; margin-bottom: 3px; }
        .val { color: #dcb; font-weight: bold; }
        .unit { color: #556; font-size: 9px; }
        
        .live-dot {
            display: inline-block;
            width: 6px; height: 6px;
            background-color: #0f0;
            border-radius: 50%;
            margin-right: 6px;
            animation: blink 1s infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        .hint {
            margin-top: 20px;
            font-size: 9px;
            color: #444;
            border-top: 1px dashed #333;
            padding-top: 10px;
        }
    </style>
</head>
<body>

<div id="hud">
    <div style="margin-bottom: 30px;">
        <div style="font-size: 10px; color: #444; letter-spacing: 2px; margin-bottom: 5px;">SYSTEM SOL // PLANET VI</div>
        <h1>SATURN</h1>
        <div style="color: #667;"><span class="live-dot"></span>LIVE FEED: CASSINI_LINK</div>
    </div>

    <div class="hud-section">
        <h2>PHYSICAL_DATA</h2>
        <div class="row"><span>EQ_DIAMETER</span> <span class="val">120,536 <span class="unit">KM</span></span></div>
        <div class="row"><span>MASS</span> <span class="val">95.16 <span class="unit">EARTHS</span></span></div>
        <div class="row"><span>AXIAL_TILT</span> <span class="val">26.73<span class="unit">°</span></span></div>
        <div class="row"><span>GRAVITY</span> <span class="val">10.44 <span class="unit">M/S²</span></span></div>
    </div>

    <div class="hud-section">
        <h2>SURFACE_SCAN</h2>
        <div class="row"><span>TEXTURE</span> <span class="val">ENRICHED (ASCII+)</span></div>
        <div class="row"><span>PALETTE</span> <span class="val">#, +, =, :, .</span></div>
        <div class="row"><span>CONTRAST</span> <span class="val">HIGH</span></div>
    </div>

    <div class="hud-section" style="border-left-color: #555;">
        <h2>RING_SYSTEM</h2>
        <div class="row"><span>DENSITY</span> <span class="val">REDUCED (WIREFRAME)</span></div>
        <div class="row"><span>MAJOR_RINGS</span> <span class="val">A, B, C</span></div>
        <div class="row"><span>THICKNESS</span> <span class="val">10 - 1000 <span class="unit">M</span></span></div>
    </div>

    <div class="hint">
        [SCROLL] ADJUST OPTICAL ZOOM<br>
        [DRAG] ADJUST ORBITAL ANGLE
    </div>
</div>

<canvas id="screen"></canvas>

<script>
    const canvas = document.getElementById('screen');
    const ctx = canvas.getContext('2d');

    // --- CONFIGURATION ---
    const C = {
        scale: 2.3,           
        centerX: 0.65,        
        centerY: 0.55,
        
        // VISUALS
        planetResolution: 13, 
        ringResolution: 28, 
        
        font: "15px Courier New",
        
        // PHYSICS
        rotSpeed: 0.0005,     
        tiltZ: 0.25,          
        tiltX: -0.45,         // Zenith View
        
        brightnessMult: 2.2   
    };

    let width, height;
    let particles = [];
    let time = 0;
    let zoom = 1;
    let dragX = 0, dragY = 0;
    let isDragging = false;
    let lastMouseX, lastMouseY;

    function init() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
        particles = [];

        const R = Math.min(width, height) * 0.4 * C.scale;

        // --- 1. PLANET GENERATION ---
        const latCount = 110; 
        
        for (let i = 0; i <= latCount; i++) {
            const phi = (i / latCount) * Math.PI - (Math.PI/2); 
            
            // Texture Noise (Complex)
            // Mixing two frequencies for varied bands
            const bandNoise = Math.sin(phi * 18) + Math.cos(phi * 36) * 0.4;
            
            if (bandNoise < -1.2) continue;

            // Arc Logic
            const gapFreq = 1 + (Math.random() > 0.9 ? 1 : 0); 
            const gapPhase = Math.random() * Math.PI * 2;
            const gapThreshold = 0.2 + Math.random() * 0.2;

            const y = R * Math.sin(phi);
            const r_slice = R * Math.cos(phi);
            const circ = 2 * Math.PI * r_slice;
            
            let res = C.planetResolution;
            if (Math.abs(phi) > 1.25) res *= 2.5;

            const dots = Math.floor(circ / res);

            for (let j = 0; j < dots; j++) {
                const theta = (j / dots) * 2 * Math.PI;
                
                const arcVal = Math.sin(theta * gapFreq + gapPhase);
                if (arcVal < -1.0 + gapThreshold) continue; 

                // --- EXPANDED TEXTURE LOGIC ---
                let char = '-';
                let col = '#666';

                // Mapping noise levels to distinct characters
                if (bandNoise > 1.0) { 
                    char = '#'; col = '#fff'; // Pure White Peaks
                } 
                else if (bandNoise > 0.6) { 
                    char = '&'; col = '#eee'; // Bright Dense
                }
                else if (bandNoise > 0.3) { 
                    char = '+'; col = '#ddd'; // Mid-High (Crosshatch)
                }
                else if (bandNoise > 0.0) { 
                    char = '='; col = '#bbb'; // Mid
                }
                else if (bandNoise > -0.3) { 
                    char = ':'; col = '#999'; // Low-Mid
                }
                else if (bandNoise > -0.6) { 
                    char = '-'; col = '#777'; // Shadow
                }
                else { 
                    char = '.'; col = '#555'; // Deep Shadow
                }

                particles.push({
                    type: 'P',
                    x: r_slice * Math.cos(theta),
                    y: y,
                    z: r_slice * Math.sin(theta),
                    char: char,
                    color: col
                });
            }
        }

        // --- 2. RINGS GENERATION ---
        const rStart = R * 1.35;
        const rEnd = R * 2.8;
        const rSteps = 40; 

        for (let r = rStart; r < rEnd; r += (rEnd - rStart)/rSteps) {
            // Cassini Gap
            if (r > R * 2.05 && r < R * 2.35) continue;

            const circ = 2 * Math.PI * r;
            const dots = circ / C.ringResolution;

            for (let j = 0; j < dots; j++) {
                const theta = (j / dots) * 2 * Math.PI; 
                
                let char = '·';
                let col = '#667';
                
                if (r < R * 1.8) { char = '-'; col = '#aaa'; } 
                else if (r > R * 2.4) { char = '.'; col = '#666'; } 

                particles.push({
                    type: 'R',
                    x: r * Math.cos(theta),
                    y: 0, 
                    z: r * Math.sin(theta),
                    char: char,
                    color: col
                });
            }
        }
    }

    // --- MATH ---
    function rotate(x, y, z, ax, ay, az) {
        let cx = Math.cos(az), sx = Math.sin(az);
        let x1 = x*cx - y*sx;
        let y1 = x*sx + y*cx;
        
        let cy = Math.cos(ay), sy = Math.sin(ay);
        let x2 = x1*cy - z*sy;
        let z2 = z*cy + x1*sy;

        let cx2 = Math.cos(ax), sx2 = Math.sin(ax);
        let y3 = y1*cx2 - z2*sx2;
        let z3 = z2*cx2 + y1*sx2;

        return { x: x2, y: y3, z: z3 };
    }

    function render() {
        ctx.fillStyle = '#020202';
        ctx.fillRect(0, 0, width, height);

        ctx.font = C.font;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';

        const cx = width * C.centerX;
        const cy = height * C.centerY;
        const fov = 1000 * zoom;
        const viewDist = 2500;
        
        time += C.rotSpeed;
        const lx = -0.4, ly = -0.4, lz = 1.0; 

        const buffer = [];

        for (let i = 0; i < particles.length; i++) {
            const p = particles[i];
            
            let spin = time;
            if (p.type === 'R') spin *= 0.3; 

            let tx = p.x * Math.cos(spin) - p.z * Math.sin(spin);
            let tz = p.z * Math.cos(spin) + p.x * Math.sin(spin);
            let ty = p.y;

            const r = rotate(tx, ty, tz, C.tiltX + dragX, dragY, C.tiltZ);

            const dist = viewDist - r.z;
            if (dist < 100) continue;

            const scale = fov / dist;
            const sx = cx + r.x * scale;
            const sy = cy + r.y * scale;

            if (sx < -50 || sx > width + 50 || sy < -50 || sy > height + 50) continue;

            let brightness = 1.0;
            let char = p.char;

            if (p.type === 'P') {
                const len = Math.sqrt(r.x**2 + r.y**2 + r.z**2);
                const nz = r.z/len; 

                let isRim = (nz > -0.15 && nz < 0.15);
                
                if (!isRim && nz < -0.1) continue; 

                const nx = r.x/len, ny = r.y/len;
                let dot = nx*lx + ny*ly + nz*lz;
                
                brightness = Math.max(0.1, dot * C.brightnessMult);
                
                if (isRim) {
                    char = '.'; 
                    brightness = 0.8;
                }
            }

            buffer.push({
                x: sx, y: sy, z: r.z,
                char: char,
                color: p.color,
                alpha: Math.min(1.0, brightness)
            });
        }

        buffer.sort((a, b) => a.z - b.z);

        for (const b of buffer) {
            ctx.globalAlpha = b.alpha;
            ctx.fillStyle = b.color;
            ctx.fillText(b.char, b.x, b.y);
        }

        requestAnimationFrame(render);
    }

    window.addEventListener('resize', init);
    window.addEventListener('wheel', e => {
        zoom += e.deltaY * -0.001;
        zoom = Math.max(0.3, Math.min(3.0, zoom));
    });
    window.addEventListener('mousedown', e => { isDragging = true; lastMouseX = e.clientX; lastMouseY = e.clientY; });
    window.addEventListener('mouseup', () => isDragging = false);
    window.addEventListener('mousemove', e => {
        if (!isDragging) return;
        dragY += (e.clientX - lastMouseX) * 0.003;
        dragX += (e.clientY - lastMouseY) * 0.003;
        lastMouseX = e.clientX; lastMouseY = e.clientY;
    });

    init();
    render();
</script>
</body>
</html>